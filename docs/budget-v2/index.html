<!doctype html>
<html lang="nl">
<head>
  <meta name="pwa_stamp" content="1766391091">

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>KGB Finance 2025 â€” Budget</title>

  
  <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon-180.png">
  <link rel="apple-touch-icon" sizes="167x167" href="icons/apple-touch-icon-167.png">
  <link rel="apple-touch-icon" sizes="152x152" href="icons/apple-touch-icon-152.png">
  <link rel="apple-touch-icon" sizes="120x120" href="icons/apple-touch-icon-120.png">
  <link rel="manifest" href="manifest.webmanifest?v=1766389313?v=pwa-20251220194252">
  <meta name="theme-color" content="#7c9cf5">
  <link rel="icon" href="icons/icon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">

  <link rel="stylesheet" href="styles.css?v=1766169624?v=20251219192508" />

  <script defer src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js?v=20251219165610"></script>
  <script defer src="app.js?v=1766169624?v=20251219192508"></script>
  <script defer src="../common/kgb_year_dropdown.js?v=20251219165610"></script>
</head>

<body>



<header class="bar">
  <h1>ðŸ’° KGB Finance 2025 â€” Budget</h1>

  <nav class="tabs" aria-label="Navigatie">
    <button type="button" data-tab="dashboard" class="tab active">Dashboard</button>
    <button type="button" data-tab="budget" class="tab">Budget</button>
    <button type="button" data-tab="theme" class="tab">Thema</button>

    <span id="yearMount" style="margin-left:10px;"></span>
  </nav>
</header>

<main>
  <!-- DASHBOARD -->
  <section id="dashboard" class="panel active">
    <div class="cards">
      <div class="card"><div class="k">Inkomen</div><div class="v" id="totIncome">0,00</div></div>
      <div class="card"><div class="k">Uitgave</div><div class="v" id="totExpense">0,00</div></div>
      <div class="card"><div class="k">Saldo</div><div class="v ok" id="totSaldo">0,00</div></div>
    </div>

    <div class="chartBar">
      <div class="left">
        <strong>Grafiek:</strong>
        <label><input type="radio" name="ctype" value="line" checked> Lijn</label>
        <label><input type="radio" name="ctype" value="bar"> Balk</label>
        <label><input type="radio" name="ctype" value="pie"> Cirkel</label>
      </div>
      <div class="right"></div>
    </div>

    <canvas id="saldoChart" height="160"></canvas>
  </section>

  <!-- BUDGET -->
  <section id="budget" class="panel">
    <h2>ðŸ“‹ Budget</h2>

    <form id="addBudget" class="addForm" autocomplete="off">
      <input id="b_date" type="date" required />
      <input id="b_cat" type="text" placeholder="Categorie" required />
      <input id="b_desc" type="text" placeholder="Omschrijving" />
      <input id="b_inc" type="number" step="0.01" inputmode="decimal" placeholder="Inkomen">
      <input id="b_exp" type="number" step="0.01" inputmode="decimal" placeholder="Uitgave">
      <button type="submit">âž• Toevoegen</button>
    </form>

    <div class="tableWrap">
      <table id="tblBudget" class="grid">
        <thead>
          <tr>
            <th>Datum</th>
            <th>Categorie</th>
            <th>Omschrijving</th>
            <th>Inkomen</th>
            <th>Uitgave</th>
            <th>Saldo (loopt)</th>
            <th>Acties</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </section>

  <!-- THEMA -->
  <section id="theme" class="panel">
    <h2>ðŸŽ¨ Thema</h2>

    <div class="themeBox">
  <label>Jaar:
    <select id="yearSelect"></select>
  </label>

  <label>Onderdeel:
    <select id="themeTarget">
      <option value="bg">Achtergrond</option>
<option value="card">Kaarten/Tabel</option>
<option value="acc">Accent/Knoppen</option>
<option value="grid">Rasterlijnen</option>
<option value="txt">Tekst</option>
    </select>
  </label>

  <div id="swatches" class="swatches"></div>

  <div class="sliders">
    <label>Intensiteit <input id="intensity" type="range" min="50" max="150" value="100"></label>
    <label>Raster <input id="gridIntensity" type="range" min="50" max="150" value="100"></label>
  </div>

  <div class="themeBtns">
    <button id="themeReset" type="button">Reset</button>
    <button id="themeSave" type="button">Opslaan</button>
  </div>
</div>
  </section>

</main>

<footer><small>Â© KGB Finance 2025</small></footer>

<!-- Tabs: ALWAYS work, even if app.js?v=1766169624 is broken -->
<script>
(function () {
  const tabs = Array.from(document.querySelectorAll('.tabs .tab[data-tab]'));
  const panels = Array.from(document.querySelectorAll('main .panel'));

  function setActive(name) {
    tabs.forEach(b => b.classList.toggle('active', b.dataset.tab === name));
    panels.forEach(p => p.classList.toggle('active', p.id === name));
  }

  tabs.forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.preventDefault();
      e.stopPropagation();
      setActive(btn.dataset.tab);
    });
  });

  // ensure initial state is correct
  const initial = (tabs.find(b => b.classList.contains('active')) || tabs[0])?.dataset?.tab || 'dashboard';
  setActive(initial);
})();
</script>

<!-- Service worker (laat staan als je PWA wil) -->
<script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    // SW disabled for budget-v2 (cache issues).catch(()=>{});
  });
}
</script>










</body>
</html>
