<!doctype html>
<html lang="nl">
<head>
  <link rel="stylesheet" href="../common/pe_whitelist.css?v=1764865096">

<style id="kgb-clickdiag-style">
#kgb-clickdiag{position:fixed;left:10px;bottom:10px;z-index:2147483647;background:#111;color:#0f0;
  border:1px solid #0f0;border-radius:10px;padding:8px 10px;font:12px/1.25 -apple-system,Segoe UI,Arial,sans-serif}
#kgb-clickdiag button{margin-left:6px;padding:4px 8px;border:1px solid #0f0;background:#000;color:#0f0;border-radius:6px;cursor:pointer}
#kgb-list{margin-top:6px;max-height:28vh;overflow:auto}
#kgb-list .row{display:flex;gap:6px;align-items:center;margin:4px 0}
#kgb-list .tag{background:#0f0;color:#111;padding:2px 6px;border-radius:6px;font-weight:600}
#kgb-list .kill{padding:2px 6px;border-radius:6px;border:1px solid #f66;color:#f66;background:#200;cursor:pointer}
</style>
<script id="kgb-clickdiag">
(function(){
  if(window.__KGB_CLICKDIAG__)return; window.__KGB_CLICKDIAG__=1;
  function unlock(doc){
    try{
      doc.querySelectorAll('[inert]').forEach(el=>el.removeAttribute('inert'));
      doc.querySelectorAll('dialog[open]').forEach(d=>{ try{ d.close(); }catch(_){ } });
      doc.querySelectorAll('[aria-modal="true"]').forEach(el=>el.removeAttribute('aria-modal'));
      const host=(doc.getElementById('root')||doc.getElementById('app')||doc.querySelector('main')||doc.body);
      if(host) host.style.pointerEvents='auto';
      const sel='a,button,input,select,textarea,summary,[role="button"],[role="link"],[role="tab"],[onclick],[tabindex]';
      doc.querySelectorAll(sel).forEach(el=>{ try{ el.disabled=false; el.removeAttribute('disabled'); const cs=getComputedStyle(el); if(cs.pointerEvents==='none') el.style.pointerEvents='auto'; }catch(_){ } });
    }catch(_){}
  }
  function looksCover(el,vw,vh){
    try{
      if(!el||el===document.documentElement||el===document.body) return false;
      const r=el.getBoundingClientRect(), A=Math.max(1,vw*vh), ratio=(Math.max(0,r.width)*Math.max(0,r.height))/A;
      const cs=getComputedStyle(el), cls=((el.className||'')+' '+(el.id||'')).toLowerCase();
      if(/\b(overlay|backdrop|modal|scrim|spinner|loading|blocker)\b/.test(cls)) return true;
      if((cs.position==='fixed'||cs.position==='absolute'||cs.position==='sticky') &&
         r.top<=2 && r.left<=2 && r.width>=vw*0.98 && r.height>=vh*0.90) return true;
      if(ratio>=0.90) return true;
      return false;
    }catch(_){ return false; }
  }
  function stackAt(x,y){
    const vw=innerWidth||1, vh=innerHeight||1;
    const list=(document.elementsFromPoint?document.elementsFromPoint(x,y):[]).filter(Boolean);
    return list.filter(el=>looksCover(el,vw,vh));
  }
  function kill(el){
    try{ el.style.setProperty('display','none','important'); el.style.setProperty('pointer-events','none','important'); el.removeAttribute('inert'); }catch(_){}
  }
  function refreshList(){
    unlock(document);
    const x=innerWidth/2, y=innerHeight/2;
    const covers=[...new Set([...stackAt(x,y),...stackAt(6,6),...stackAt(innerWidth-6,6),...stackAt(6,innerHeight-6),...stackAt(innerWidth-6,innerHeight-6)])];
    const list=document.getElementById('kgb-list'); list.innerHTML='';
    if(!covers.length){ list.innerHTML='<div>Geen blockers gedetecteerd.</div>'; return; }
    covers.slice(0,12).forEach((el,i)=>{
      const r=el.getBoundingClientRect(), tag=el.tagName.toLowerCase(), id=el.id?('#'+el.id):'', cls=(el.className && ('.'+String(el.className).trim().replace(/\s+/g,'.'))) || '';
      const row=document.createElement('div'); row.className='row';
      const label=document.createElement('span'); label.className='tag'; label.textContent=`${i+1}) ${tag}${id}${cls} ‚Äî ${Math.round(r.width)}√ó${Math.round(r.height)} `;
      const btn=document.createElement('button'); btn.className='kill'; btn.textContent='Verwijder';
      btn.onclick=()=>{ kill(el); refreshList(); };
      row.appendChild(label); row.appendChild(btn); list.appendChild(row);
    });
  }
  const box=document.createElement('div');
  box.id='kgb-clickdiag';
  box.innerHTML='<b>Diagnose klik</b> <button id="kgb-scan">Scan</button> <button id="kgb-auto">Auto</button><div id="kgb-list"></div>';
  document.body.appendChild(box);
  document.getElementById('kgb-scan').onclick=refreshList;
  let autoT=null;
  document.getElementById('kgb-auto').onclick=()=>{ if(autoT){clearInterval(autoT);autoT=null;return;} autoT=setInterval(refreshList,500); };
  setTimeout(refreshList, 200);
})();
</script>


<style id="kgb-clickdiag-style">
#kgb-clickdiag{position:fixed;left:10px;bottom:10px;z-index:2147483647;background:#111;color:#0f0;
  border:1px solid #0f0;border-radius:10px;padding:8px 10px;font:12px/1.25 -apple-system,Segoe UI,Arial,sans-serif}
#kgb-clickdiag button{margin-left:6px;padding:4px 8px;border:1px solid #0f0;background:#000;color:#0f0;border-radius:6px;cursor:pointer}
#kgb-list{margin-top:6px;max-height:28vh;overflow:auto}
#kgb-list .row{display:flex;gap:6px;align-items:center;margin:4px 0}
#kgb-list .tag{background:#0f0;color:#111;padding:2px 6px;border-radius:6px;font-weight:600}
#kgb-list .kill{padding:2px 6px;border-radius:6px;border:1px solid #f66;color:#f66;background:#200;cursor:pointer}
</style>
<script id="kgb-clickdiag">
(function(){
  if(window.__KGB_CLICKDIAG__)return; window.__KGB_CLICKDIAG__=1;
  function unlock(doc){
    try{
      doc.querySelectorAll('[inert]').forEach(el=>el.removeAttribute('inert'));
      doc.querySelectorAll('dialog[open]').forEach(d=>{ try{ d.close(); }catch(_){ } });
      doc.querySelectorAll('[aria-modal="true"]').forEach(el=>el.removeAttribute('aria-modal'));
      const host=(doc.getElementById('root')||doc.getElementById('app')||doc.querySelector('main')||doc.body);
      if(host) host.style.pointerEvents='auto';
      const sel='a,button,input,select,textarea,summary,[role="button"],[role="link"],[role="tab"],[onclick],[tabindex]';
      doc.querySelectorAll(sel).forEach(el=>{ try{ el.disabled=false; el.removeAttribute('disabled'); const cs=getComputedStyle(el); if(cs.pointerEvents==='none') el.style.pointerEvents='auto'; }catch(_){ } });
    }catch(_){}
  }
  function looksCover(el,vw,vh){
    try{
      if(!el||el===document.documentElement||el===document.body) return false;
      const r=el.getBoundingClientRect(), A=Math.max(1,vw*vh), ratio=(Math.max(0,r.width)*Math.max(0,r.height))/A;
      const cs=getComputedStyle(el), cls=((el.className||'')+' '+(el.id||'')).toLowerCase();
      if(/\b(overlay|backdrop|modal|scrim|spinner|loading|blocker)\b/.test(cls)) return true;
      if((cs.position==='fixed'||cs.position==='absolute'||cs.position==='sticky') &&
         r.top<=2 && r.left<=2 && r.width>=vw*0.98 && r.height>=vh*0.90) return true;
      if(ratio>=0.90) return true;
      return false;
    }catch(_){ return false; }
  }
  function stackAt(x,y){
    const vw=innerWidth||1, vh=innerHeight||1;
    const list=(document.elementsFromPoint?document.elementsFromPoint(x,y):[]).filter(Boolean);
    return list.filter(el=>looksCover(el,vw,vh));
  }
  function kill(el){
    try{ el.style.setProperty('display','none','important'); el.style.setProperty('pointer-events','none','important'); el.removeAttribute('inert'); }catch(_){}
  }
  function refreshList(){
    unlock(document);
    const x=innerWidth/2, y=innerHeight/2;
    const covers=[...new Set([...stackAt(x,y),...stackAt(6,6),...stackAt(innerWidth-6,6),...stackAt(6,innerHeight-6),...stackAt(innerWidth-6,innerHeight-6)])];
    const list=document.getElementById('kgb-list'); list.innerHTML='';
    if(!covers.length){ list.innerHTML='<div>Geen blockers gedetecteerd.</div>'; return; }
    covers.slice(0,12).forEach((el,i)=>{
      const r=el.getBoundingClientRect(), tag=el.tagName.toLowerCase(), id=el.id?('#'+el.id):'', cls=(el.className && ('.'+String(el.className).trim().replace(/\s+/g,'.'))) || '';
      const row=document.createElement('div'); row.className='row';
      const label=document.createElement('span'); label.className='tag'; label.textContent=`${i+1}) ${tag}${id}${cls} ‚Äî ${Math.round(r.width)}√ó${Math.round(r.height)} `;
      const btn=document.createElement('button'); btn.className='kill'; btn.textContent='Verwijder';
      btn.onclick=()=>{ kill(el); refreshList(); };
      row.appendChild(label); row.appendChild(btn); list.appendChild(row);
    });
  }
  const box=document.createElement('div');
  box.id='kgb-clickdiag';
  box.innerHTML='<b>Diagnose klik</b> <button id="kgb-scan">Scan</button> <button id="kgb-auto">Auto</button><div id="kgb-list"></div>';
  document.body.appendChild(box);
  document.getElementById('kgb-scan').onclick=refreshList;
  let autoT=null;
  document.getElementById('kgb-auto').onclick=()=>{ if(autoT){clearInterval(autoT);autoT=null;return;} autoT=setInterval(refreshList,500); };
  setTimeout(refreshList, 200);
})();
</script>


<script id="kgb-shadow-unblock-v7">
(function(){
  if (window.__KGB_V7__) return; window.__KGB_V7__=true;

  const OVERLAY_SEL = [
    '.overlay','.backdrop','.modal','.scrim','.spinner','.loading','.preloader',
    '#overlay','#backdrop','#modal','#spinner','#loading',
    '[data-loading]','[data-blocker]','[role="dialog"]'
  ].join(',');

  function cleanRoot(doc){
    try{
      // 1) Unfreeze
      doc.querySelectorAll('[inert]').forEach(el=>el.removeAttribute('inert'));
      doc.querySelectorAll('dialog[open]').forEach(d=>{ try{ d.close(); }catch(_){ } });
      doc.querySelectorAll('[aria-modal="true"]').forEach(el=>el.removeAttribute('aria-modal'));

      // 2) Overlays in deze root
      try {
        doc.querySelectorAll(OVERLAY_SEL).forEach(el=>{
          el.style.setProperty('display','none','important');
          el.style.setProperty('pointer-events','none','important');
          el.removeAttribute('inert');
        });
      } catch(_){}

      // 3) Host-app klikbaar
      const host = doc.getElementById('root') || doc.getElementById('app') || doc.querySelector('main') || doc.body || doc;
      if (host && host.style) host.style.pointerEvents='auto';

      // 4) Controls klikbaar
      const clickables = 'a,button,input,select,textarea,summary,[role="button"],[role="link"],[role="tab"],[onclick],[tabindex]';
      doc.querySelectorAll(clickables).forEach(el=>{
        try{
          el.disabled = false; el.removeAttribute('disabled');
          const cs = (doc.defaultView||window).getComputedStyle(el);
          if (cs && cs.pointerEvents==='none') el.style.pointerEvents='auto';
        }catch(_){}
      });
    }catch(_){}
  }

  // Recurse alle shadowRoots
  function walk(node){
    try{
      const doc = node.nodeType===9 ? node : (node.ownerDocument || document);
      cleanRoot(node.shadowRoot ? node.shadowRoot : doc);
      if (node.shadowRoot) {
        try { node.shadowRoot.querySelectorAll('*').forEach(walk); } catch(_){}
      }
    }catch(_){}
  }

  function runAll(){
    try{
      cleanRoot(document);
      // loop over alle elementen en bezoek hun shadowRoots
      document.querySelectorAll('*').forEach(el=>{
        if (el.shadowRoot){ cleanRoot(el.shadowRoot); el.shadowRoot.querySelectorAll('*').forEach(walk); }
      });
    }catch(_){}
  }

  // SW/caches (best effort)
  function clearSW(){
    try{ if('serviceWorker' in navigator){ navigator.serviceWorker.getRegistrations().then(rs=>rs.forEach(r=>r.unregister())).catch(()=>{});} }catch(_){}
    try{ if(window.caches&&caches.keys){ caches.keys().then(ks=>Promise.all(ks.map(k=>caches.delete(k)))).catch(()=>{});} }catch(_){}
  }

  function schedule(){
    clearSW(); runAll();
    setTimeout(runAll, 150);
    setTimeout(runAll, 400);
    setTimeout(runAll, 900);
    setTimeout(runAll, 1600);
  }

  if (document.readyState==='loading'){ document.addEventListener('DOMContentLoaded', schedule, {once:true}); }
  else { schedule(); }

  document.addEventListener('visibilitychange', ()=>{ if(!document.hidden) setTimeout(runAll,150); });
})();
</script>









  <link rel="stylesheet" href="../common/force_click.css?v=1764853340">










<meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>KGB Finance 2025 ‚Äî Budget</title>
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#7c9cf5">
  <link rel="icon" href="icons/icon.svg" type="image/svg+xml">
  <link rel="stylesheet" href="styles.css" />
  <script defer src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <script defer src="app.js"></script>
  <link <link rel="apple-touch-icon" sizes="180x180" href="../icons/kgb-budget-180.png">
  <link rel="stylesheet" href="../common/sync_embed.css">
  <link rel="stylesheet" href="../common/ui_fix.css">
  <meta name="apple-mobile-web-app-capable" content="yes">
</head>
<body>
<header class="bar">
  <h1>üí∞ KGB Finance 2025 ‚Äî Budget</h1>
  <nav class="tabs">
    <button data-tab="dashboard" class="tab active">Dashboard</button>
    <button data-tab="budget" class="tab">Budget</button>
    <button data-tab="theme" class="tab">Thema</button>
    <button data-tab="io" class="tab">Export / Import</button>
  </nav>
</header>

<main>
  <section id="dashboard" class="panel active">
    <div class="cards">
      <div class="card"><div class="k">Inkomen</div><div class="v" id="totIncome">0,00</div></div>
      <div class="card"><div class="k">Uitgave</div><div class="v" id="totExpense">0,00</div></div>
      <div class="card"><div class="k">Saldo</div><div class="v ok" id="totSaldo">0,00</div></div>
    </div>

    <div class="chartBar">
      <div class="left">
        <strong>Grafiek:</strong>
        <label><input type="radio" name="ctype" value="line" checked> Lijn</label>
        <label><input type="radio" name="ctype" value="bar"> Balk</label>
        <label><input type="radio" name="ctype" value="pie"> Cirkel</label>
      </div>
      <div class="right">
        <button id="btnDemo">Demo-data</button>
        <button id="btnClear">Refresh</button>
      </div>
    </div>
    <canvas id="saldoChart" height="160"></canvas>
  </section>

  <section id="budget" class="panel">
    <h2>üìã Budget</h2>
    <form id="addBudget" class="addForm">
      <input id="b_date" type="date" required />
      <input id="b_cat" type="text" placeholder="Categorie" required />
      <input id="b_desc" type="text" placeholder="Omschrijving" />
      <input id="b_inc" type="number" step="0.01" inputmode="decimal" placeholder="Inkomen">
      <input id="b_exp" type="number" step="0.01" inputmode="decimal" placeholder="Uitgave">
      <button type="submit">‚ûï Toevoegen</button>
    </form>

    <div class="tableWrap">
      <table id="tblBudget" class="grid">
        <thead>
          <tr><th>Datum</th><th>Categorie</th><th>Omschrijving</th><th>Inkomen</th><th>Uitgave</th><th>Saldo (loopt)</th><th>Acties</th></tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </section>

  <section id="theme" class="panel">
    <h2>üé® Thema</h2>
    <div class="themeBox">
      <label>Onderdeel:
        <select id="themeTarget">
          <option value="bg">Achtergrond</option>
          <option value="card">Kaarten/Tabel</option>
          <option value="acc">Accent/Knoppen</option>
          <option value="grid">Rasterlijnen</option>
          <option value="txt">Tekst</option>
        </select>
      </label>
      <div id="swatches" class="swatches"></div>
      <div class="sliders">
        <label>Intensiteit <input id="intensity" type="range" min="50" max="150" value="100"></label>
        <label>Raster <input id="gridIntensity" type="range" min="50" max="150" value="100"></label>
      </div>
      <div class="themeBtns">
        <button id="themeReset">Reset</button>
        <button id="themeSave">Opslaan</button>
      </div>
    </div>
  </section>

  <section id="io" class="panel">
    <h2>‚¨áÔ∏è Export / ‚¨ÜÔ∏è Import</h2>
    <div class="io-actions">
      <button id="btnExport">Export JSON</button>
      <label class="fileLabel">Import JSON <input id="fileImport" type="file" accept="application/json"></label>
      <button id="btnReset" class="danger">Reset (alles wissen)</button>
    </div>
    <p class="muted">PWA ‚Äì werkt offline na 1√ó laden.</p>
  </section>
</main>

<footer><small>¬© KGB Finance 2025</small></footer>

<script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => void 0 && navigator.serviceWorker.register('./service-worker.js'));
}
</script>
<script>if('serviceWorker' in navigator){void 0 && navigator.serviceWorker.register('./sw.js',{scope:'./'});}</script>
  <script src="../common/sync_embed.js" defer></script>
  <script src="../common/kgb_year_dropdown.js" defer></script>
  <script src="../common/drive_autopull.js"></script>
  <script src="../common/ui_fix.js"></script>
  <script defer src="../common/pwa_hotfix.js"></script>
  <script defer src="../common/layout_fix.js"></script>
  <script defer src="../common/ui_rescue.js"></script>




















</body>
</html>
