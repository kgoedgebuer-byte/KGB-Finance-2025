<!doctype html><meta charset="utf-8"><title>KGB â€” Cache/SW schoon</title>
<style>body{font:16px system-ui,Segoe UI,Arial;margin:2rem}pre{white-space:pre-wrap}</style>
<h1>ServiceWorker & cache wissen</h1>
<pre id="log">Start...</pre>
<script>
(async()=>{
  const L=s=>document.getElementById('log').textContent+='\n'+s;
  try{
    if('serviceWorker' in navigator){
      const regs=await navigator.serviceWorker.getRegistrations();
      for(const r of regs){ try{await r.unregister(); L('SW uitgeschreven: '+(r.scope||''));}catch(e){L('Unregister fout: '+e);} }
    }
    if('caches' in self){
      const names=await caches.keys();
      await Promise.all(names.map(n=>caches.delete(n)));
      L('Caches verwijderd: '+(names.join(', ')||'-'));
    }
    try{ localStorage.clear(); sessionStorage.clear(); L('local/sessionStorage leeggemaakt'); }catch(e){}
    L('Klaar. Herladen...');
    setTimeout(()=>location.href='./full/?v='+Date.now(),1200);
  }catch(e){ L('Fout: '+e.message); }
})();
</script>
